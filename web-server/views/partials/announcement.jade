include ../mixins/block

+blockWithSideBar("公告", [["addAnn()", "添加公告"]])
    div(class="message errormsg", ng-show="error")
        p {{error}}
    div(class="message success", ng-show="info")
        p {{info}}
    form(ng-show="editable", role="form").form-horizontal
        .form-group(style="height: 34px")
            label(class="control-label col-md-1") 公告名
            .col-md-8: input(type="text", placeholder="公告名", ng-model="editable.name").form-control
        .form-group(style="height: 34px")
            label(class="control-label col-md-1") 可见分区
            .col-md-8: input(type="text", placeholder="可见分区，留空则所有分区可见", ng-list, ng-model="editable.partitions").form-control
        .form-group(style="height: 174px")
            label(class="control-label col-md-1") 开始时间
            .col-md-8: datetimepicker#datePicker(format-date="yyyy-MM-dd", ng-model="editable.start", min-date="'2014-01-01'", max-date="'2020-01-01'", show-weeks="false", ng-required="true", hour-step="1", minute-step="15", show-meridian="false", close-text="关闭", current-text="今天", toggle-weeks-text="显示周数", clear-text="清空", datepicker-append-to-body="true")
        .form-group(style="height: 174px")
            label(class="control-label col-md-1") 结束时间
            .col-md-8: datetimepicker#datePicker(format-date="yyyy-MM-dd", ng-model="editable.end", min-date="'2014-01-01'", max-date="'2020-01-01'", show-weeks="false", ng-required="true", hour-step="1", minute-step="15", show-meridian="false", close-text="关闭", current-text="今天", toggle-weeks-text="显示周数", clear-text="清空", datepicker-append-to-body="true")
        .form-group
            label(class="control-label col-md-1") 内容
            .col-md-8: text-angular(ng-model="editable.content", ta-toolbar-button-class="btn btn-xs")
        .form-group
            label(class="control-label col-md-1") 原始内容
            .col-md-8: textarea(ng-model="editable.content")
        .form-group(style="height: 45px")
            button(ng-if="!editable.isNew", type="submit", class="btn btn-primary btn-lg col-md-offset-1", ng-click="modify(editable)") 修改
            button(ng-if="editable.isNew", type="submit", class="btn btn-primary btn-lg col-md-offset-1", ng-click="save(editable)") 保存
            button(type="submit", class="btn btn-danger btn-lg col-md-offset-1", ng-click="remove(editable)") 删除
